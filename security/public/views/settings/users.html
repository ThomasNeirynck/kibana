<kbn-settings-app section="security">
  <div class="kbn-settings-security container">
    <br />
    <ul class="nav nav-tabs">
      <li class="kbn-settings-tab active"><a href="#/settings/security/users">Users</a></li>
      <li class="kbn-settings-tab"><a href="#/settings/security/roles">Roles</a></li>
    </ul>
    <br />
    <div class="tab-content">
      <div class="container">
        <div class="row">
          <form role="form" class="col-md-10">
            <input aria-label="Filter" ng-model="query" class="form-control" type="text" placeholder="Filter..." />
          </form>
          <div class="pull-right">
            <button ng-click="deleteUsers()" class="btn btn-danger" ng-disabled="!selectedUsers.length">Delete</button>
            <a href="#/settings/security/users/edit" ng-click="newUser()" class="btn btn-default">New User</a>
          </div>
        </div>
      </div>
      <table class="table table-striped">
        <thead>
          <tr>
            <th><input type="checkbox" ng-click="toggleAll()" ng-checked="allSelected()" /></th>
            <th>Username</th>
            <th>Roles</th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="user in users | orderBy:'username' | filter:query">
            <td>
              <input type="checkbox" ng-click="toggle(selectedUsers, user)" ng-checked="includes(selectedUsers, user)" />
            </td>
            <td>
              <a ng-href="#/settings/security/users/edit/{{user.username}}">{{user.username}}</a>
            </td>
            <td>
              <span ng-repeat="role in user.roles">
                <a ng-href="#/settings/security/roles/edit/{{role}}">{{role}}</a><span ng-if="!$last">,</span>
              </span>
            </td>
          </tr>
          <tr ng-show="!(users | filter:query).length">
            <td colspan="3">No <span ng-show="query">matching</span> users found.</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</kbn-settings-app>
