[role="xpack"]
[[installing-xpack-kb]]
== Installing X-Pack in Kibana
++++
<titleabbrev>Installing {xpack}</titleabbrev>
++++


After you install {kib}, you can optionally obtain and install {xpack}.
For more information about how to obtain {xpack},
see https://www.elastic.co/products/x-pack.


NOTE: You must run the version of {xpack} that matches the version of {kib}
you are running. See the
https://www.elastic.co/support/matrix#matrix_compatibility[Elastic Support Matrix]
for more information about product compatibility.

The following diagram provides an overview of the steps that are required to
set up {xpack} on {kib}:

image::setup/images/KibanaFlow.jpg[Installation overview on {kib}]

To install {xpack} in {kib}:

. If you have not done so already,
{ref}/installing-xpack-es.html[install {xpack} on {es}].

. Optional: If you want to install {xpack} on a machine that doesn't have internet
access:

.. Manually download the {xpack} zip file:
https://artifacts.elastic.co/downloads/packs/x-pack/x-pack-{version}.zip[
+https://artifacts.elastic.co/downloads/packs/x-pack/x-pack-{version}.zip+]
(https://artifacts.elastic.co/downloads/packs/x-pack/x-pack-{version}.zip.sha512[sha512])
+
--
NOTE: The plugins for {es}, {kib}, and Logstash are included in the same zip
file. If you have already downloaded this file to install {xpack} on one of
those other products, you can reuse the same file.

--

.. Transfer the zip file to a temporary directory on the offline machine. (Do NOT
put the file in the {es} plugins directory.)

. Run `bin/kibana-plugin` in your {kib} installation directory.
+
--
[source,shell]
----------------------------------------------------------
bin/kibana-plugin install x-pack
----------------------------------------------------------

The plugin install scripts require direct internet access to download and
install {xpack}. If your server doesn’t have internet access, specify the
location of the {xpack} zip file that you downloaded to a temporary directory.

["source","sh",subs="attributes"]
----------------------------------------------------------
bin/kibana-plugin install file:///path/to/file/x-pack-{version}.zip
----------------------------------------------------------

The {kib} server needs to be able to write to files in the `optimize` directory.
If you’re using `sudo` or `su`, run the plugin installation as the built-in
`kibana` user.  For example:

[source,shell]
----------------------------------------------------------
sudo -u kibana bin/kibana-plugin install x-pack
----------------------------------------------------------

For more information, see <<_installing_plugins>>.
--

. Update {kib} to use the new password for the built-in `kibana` user, which you
set up along with the other built-in users when you installed {xpack} on {es}.
You must configure the `elasticsearch.password` setting in the `kibana.yml`
configuration file with the new password for the `kibana` user.
+
--
[source,yaml]
-----------------------------------------------
elasticsearch.username: "kibana"
elasticsearch.password: "kibanapassword"
-----------------------------------------------

For more information,
see {xpack-ref}/setting-up-authentication.html[Setting Up User Authentication].
--

. Start {kib}.
+
[source,shell]
----------------------------------------------------------
bin/kibana
----------------------------------------------------------

. To verify {xpack} installation, point your web browser at
`http://localhost:5601/` to open {kib}. You should be prompted to log in. You
can use any {es} user that has the `kibana_user` role. The built-in `kibana`
user, however, should be used only internally by the {kib} server. For more
information, see {xpack-ref}/built-in-roles.html[Built-in Roles].

. {logstash-ref}/installing-xpack-log.html[Install {xpack} on Logstash].

For more information about installing {xpack} across the Elastic Stack, see
{xpack-ref}/installing-xpack.html[Installing X-Pack].
