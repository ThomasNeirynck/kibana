<kbn-settings-app section="reporting">
  <div class="kbn-settings-reporting container">
    <h1>Generated Reports</h1>

    <table class="table table-striped" ng-class="{ loading: loading === true }">
      <thead>
        <tr>
          <th>Document</th>
          <th>Added</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr ng-if="!jobs.jobs.length">
          <td colspan="5">No reports have been created</td>
        </tr>
        <tr ng-if="jobs.jobs.length" ng-repeat="job in jobs.jobs">
          <td>
            <div>{{ job.object_title }}</div>
            <div style="color: #acb6c0">{{ job.object_type }}</div>
          </td>
          <td>
            <div>{{ job.created_at | date : 'yyyy-MM-dd @ h:mm a' }}</div>
            <div style="color: #acb6c0" ng-if="job.created_by">{{ job.created_by }}</div>
          </td>
          <td>
            <div>{{ job.status }}</div>
            <div style="color: #acb6c0" ng-if="job.status === 'processing'">{{ job.started_at | date : 'yyyy-MM-dd @ h:mm a' }}</div>
            <div style="color: #acb6c0" ng-if="job.status === 'completed'">{{ job.completed_at | date : 'yyyy-MM-dd @ h:mm a' }}</div>
          </td>
          <td>
            <button
              class="btn btn-default"
              ng-if="job.status === 'completed'"
              ng-click=download(job.id)
              title="Download"
              >
              <i class="fa fa-download"></i>
            </button>
          </td>
        </tr>
      </tbody>
    </table>

    <div style="text-align: center;">
      <paging
        page="currentPage"
        page-size="10"
        total="jobs.total"
        show-prev-next="true"
        show-first-last="true"
        paging-action="setPage(page)">
      </paging>
    </div>
  </div>
</kbn-settings-app>